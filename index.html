<!DOCTYPE html>
<html>
<head>
    <title>Building Shapes on Google Maps</title>
    <style>
        /* Set html, body, and #map to take full height */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100%;
            width: 100%;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCobCO1jQNA8cIv-IwQU9uzR9qoQaqvFiY&libraries=geometry"></script>
    <script>
        function initMap() {
            // Initialize the map, centered at the specified coordinates
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 8,  // Adjust the zoom level as needed (higher number means more zoomed in)
                center: {lat: 29.478324, lng: 47.607149} // Set the center to your specified coordinates
            });

            // Example building data, replace with your actual building data
            var buildings = [
                {
                    code: "B001",
                    name: "Building 1",
                    stage: "completed",
                    coordinates: [
                        {lat: 29.478324, lng: 47.607149},
                        {lat: 29.478424, lng: 47.607249},
                        {lat: 29.478524, lng: 47.607349},
                        {lat: 29.478624, lng: 47.607449}
                    ]
                },
                {
                    code: "B002",
                    name: "Building 2",
                    stage: "in_progress",
                    coordinates: [
                        {lat: 29.478724, lng: 47.607549},
                        {lat: 29.478824, lng: 47.607649},
                        {lat: 29.478924, lng: 47.607749},
                        {lat: 29.479024, lng: 47.607849}
                    ]
                }
                // Add more buildings here
            ];

            // Iterate over the buildings array to create polygons
            buildings.forEach(function(building) {
                var color;
                // Determine the color based on the stage of construction
                switch(building.stage) {
                    case 'completed':
                        color = 'green';
                        break;
                    case 'in_progress':
                        color = 'yellow';
                        break;
                    case 'planned':
                        color = 'red';
                        break;
                }

                // Create the polygon for the building
                var buildingShape = new google.maps.Polygon({
                    paths: building.coordinates,
                    strokeColor: color,
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: color,
                    fillOpacity: 0.35
                });

                // Set the polygon on the map
                buildingShape.setMap(map);

                // Create an info window for the building
                var infowindow = new google.maps.InfoWindow({
                    content: `Building ID: ${building.code}<br>Name: ${building.name}`
                });

                // Add a click listener to the polygon to show the info window
                buildingShape.addListener('click', function(event) {
                    infowindow.setPosition(event.latLng);
                    infowindow.open(map);
                });
            });
        }
    </script>
</head>
<body onload="initMap()">
    <div id="map"></div>
</body>
</html>
